com.everrich.properties.appname=EverRich

# ----------------------------------------
# PostgreSQL Database Configuration - GCP Cloud SQL Based - Not used pre-production
# ----------------------------------------
# Production GCP Cloud SQL settings (read from environment variables)
#spring.datasource.url=${DB_URL}
#spring.cloud.gcp.sql.enabled=true
#spring.datasource.username=everrich-db-user
#spring.cloud.gcp.sql.database-name=everrich-db
#spring.datasource.password=OnTopOfTheWorld7?
#spring.cloud.gcp.sql.instance-connection-name=flawless-star-468713-g6:us-central1:everrich
#spring.datasource.hikari.initialization-fail-timeout=-1

# ----------------------------------------
# PostgreSQL Database Configuration
# ----------------------------------------
spring.cloud.gcp.sql.enabled=false
spring.datasource.url=jdbc:postgresql://db.gazvxpunuuhvenlaicem.supabase.co:5432/postgres
spring.datasource.driverClassName=org.postgresql.Driver
spring.datasource.username=postgres
spring.datasource.password=OnTopOfTheWorld7?

#Redis Cloud Configuration
#com.everrich.properties.redis.uri=redis://:YFoA9DPiVmseta85pgadwC0HAWN6CTlc@redis-18108.c327.europe-west1-2.gce.redns.redis-cloud.com:18108/0
com.everrich.properties.redis.uri=redis://:YFoA9DPiVmseta85pgadwC0HAWN6CTlc@redis-14502.c304.europe-west1-2.gce.cloud.redislabs.com:14502/0
com.everrich.properties.redis.transactionindex=transaction_index
com.everrich.properties.gcpprojectid=flawless-star-468713-g6
com.everrich.properties.gcplocation=us-central1
com.everrich.properties.gcpendpoint=us-central1-aiplatform.googleapis.com:443
com.everrich.properties.embeddingmodel=gemini-embedding-001
com.everrich.properties.targetvectordimension=1536

# Spring Data JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
# Suppress DDL exception logging for "already exists" errors during schema update
spring.jpa.properties.hibernate.hbm2ddl.halt_on_error=false

# ----------------------------------------
# Email Configuration (SMTP for Production)
# ----------------------------------------
# Using Gmail SMTP for production emails
# Note: You need to set up an App Password for Gmail if using 2FA
# Create an App Password at: https://myaccount.google.com/apppasswords
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Application Email Settings
app.mail.enabled=${MAIL_ENABLED:true}
app.mail.from=${MAIL_FROM:noreply@everrich.app}
app.base-url=${APP_BASE_URL:https://spendmanager.everrich.app}

# ----------------------------------------
# Multi-Tenancy Configuration (Production)
# ----------------------------------------
# Enable multi-tenancy for production
app.multitenancy.enabled=true

# Default schema name
app.multitenancy.default-schema=public

# Prefix for tenant schema names (schemas will be named: tenant_<registrationId>)
app.multitenancy.schema-prefix=tenant_

# Tables that should NOT be copied to tenant schemas (they remain in public schema only)
# These are shared across all tenants
app.multitenancy.excluded-tables=app_user,registration,registration_id_seq

# Tables that should have their data copied to new tenant schemas
# (e.g., default categories, accounts, etc. that every tenant should start with)
app.multitenancy.tables-with-default-data=account,category,saved_insight,statement,transaction

# Logging for multi-tenancy (INFO level for production)
logging.level.com.everrich.spendmanager.multitenancy=INFO

# Suppress Hibernate schema DDL "already exists" warnings
logging.level.org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl=ERROR

